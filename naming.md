


https://lee.matter.cx/project/paul/

http://matter.leesbazaar.com/
http://leesbazaar.matter.cx/




http://api.leesbazaar.com/
http://api.leesbazaar.matter.cx/




https://api.lee.matter.cx/project/paul/



FRONT END ACCESS
If user is authenticated they get admin access to the manager. Otherwise its just to browse.

WWW
http://www.leesbazaar.com/                    >       http://lbowyer.realms.cx/leesbazaar
http://www.misterandmisfit.com/               >       http://lbowyer.realms.cx/misterandmisfit

REALMS MANAGER / BROWSER
http://realm.leesbazaar.com/                    >       http://lbowyer.realms.cx/leesbazaar
http://realm.misterandmisfit.com/               >       http://lbowyer.realms.cx/misterandmisfit

SURFACE MANAGER / BROWSE
http://surface.leesbazaar.com/                  >       http://lbowyer.surface.cx/leesbazaar
http://surface.misterandmisfit.com/             >       http://lbowyer.surface.cx/misterandmisfit

MATTER MANAGER / BROWSE
http://matter.leesbazaar.com/                   >       http://lbowyer.matter.cx/
http://matter.misterandmisfit.com/              >    


API ACCESS
REALMS
http://api.leesbazaar.com/                          >       http://lbowyer.realms.cx/api/realms/leesbazaar
http://api.misterandmisfit.com/                     >       http://lbowyer.realms.cx/api/realms/misterandmisfit

SURFACE
http://api.leesbazaar.com/surface                   >       http://lbowyer.surface.cx/api/surface/leesbazaar
http://api.misterandmisfit.com/surface              >       http://lbowyer.surface.cx/api/surface/misterandmisfit

MATTER
http://api.leesbazaar.com/matter                    >       http://lbowyer.matter.cx/api/matter
http://api.misterandmisfit.com/matter               >    
















FRONT END ACCESS
If user is authenticated they get admin access to the manager. Otherwise its just to browse.

UNAUTHENTICATED
http://www.leesbazaar.com/                    >       http://leesbazaar.realms.cx/
http://www.misterandmisfit.com/               >       http://misterandmisfit.realms.cx/




AUTHENTICATED

http://realm.leesbazaar.com/                    >       http://leesbazaar.realms.cx/
http://realm.misterandmisfit.com/               >       http://misterandmisfit.realms.cx/

http://surface.leesbazaar.com/                  >       http://leesbazaar.surface.cx/
http://surface.misterandmisfit.com/             >       http://misterandmisfit.surface.cx/

http://matter.leesbazaar.com/                   >       http://lbowyer.matter.cx/
http://matter.misterandmisfit.com/              >    


API ACCESS
REALMS
http://api.leesbazaar.com/                          >       http://lbowyer.realms.cx/api/realms/leesbazaar
http://api.misterandmisfit.com/                     >       http://lbowyer.realms.cx/api/realms/misterandmisfit

SURFACE
http://api.leesbazaar.com/surface                   >       http://lbowyer.surface.cx/api/surface/leesbazaar
http://api.misterandmisfit.com/surface              >       http://lbowyer.surface.cx/api/surface/misterandmisfit

BASE
http://api.matter.leesbazaar.com/                    >       http://api.leesbazaar.matter.cx/.
http://api.surface.leesbazaar.com/                    >       http://api.leesbazaar.surface.cx/
http://api.realms.leesbazaar.com/                    >       http://api.leesbazaar.realms.cx/


http://www.leesbazaar.com                                   http://leesbazaar.realms.cx
http://matter.leesbazaar.com                                http://leesbazaar.matter.cx
http://surface.leesbazaar.com                                http://leesbazaar.surface.cx
http://realms.leesbazaar.com                                http://leesbazaar.realms.cx


http://api.leesbazaar.com/                    >             http://lbowyer.vanilla.cx/
http://api.leesbazaar.com/                    >             http://lbowyer.vanilla.cx/api/matter/project/paul
http://api.leesbazaar.com/                    >             http://lbowyer.vanilla.cx/api/surface
http://api.leesbazaar.com/                    >             http://lbowyer.vanilla.cx/api/realms






http://api.leesbazaar.com/                          >       http://leesbazaar.vanilla-network.cx/
http://api.leesbazaar.com/matter                    >       http://leesbazaar.vanilla-network.cx/matter
http://api.leesbazaar.com/surface                    >       http://leesbazaar.vanilla-network.cx/surface
http://api.leesbazaar.com/realms                    >       http://leesbazaar.vanilla-network.cx/realms




http://api.leesbazaar.com/matter                          >       http://leesbazaar.matter.cx/
http://api.leesbazaar.com/surface                          >       http://leesbazaar.matter.cx/
http://api.leesbazaar.com/realms                          >       http://leesbazaar.matter.cx/




http://api.leesbazaar.com/                          >       http://leesbazaar.matter.cx/api/matter




http://api.leesbazaar.com/matter                    >       http://lbowyer.matter.cx/api/matter
http://api.misterandmisfit.com/matter               >    


           >    










NOTES
Are views created at the model level and or the surface level ?

* Matter Contains ALL data conforming to Model
* Surface is auto generated for each model
  - When opening Surface browse models and can create views / designs
    AND
  - Surface you can also create surfaces that have multiple data sources - HOW DOES THIS WORK ? At this point the model/view/matter paths no longer work. Need slugs ?


# Open Account
User opens an account. If user name is free they get a subdomain:

http://lbowyer.vanilla.cx

# Services
Now they have access to Surface, Matter and Realms. If they decide to activate they have:

http://lbowyer.realms.cx

http://lbowyer.masters.cx
http://lbowyer.matter.cx
http://lbowyer.surface.cx

## Matter

For browsing (guest, unauthorised):
http://lbowyer.matter.cx/<model>/<matter>

For browser editing (authorised):
http://lbowyer.matter.cx/<model>/<matter>

For CMS consumption
http://lbowyer.api.matter.cx/<model>/<matter>

## Surface
(When creating a surface you choose a model, create a view then a style.)
For browsing (guest, unauthorised):
http://lbowyer.surface.cx/<model>/  (default view)
http://lbowyer.surface.cx/<model>/views/<view>
http://lbowyer.surface.cx/<model>/views/<view>/<matter> (default branch)
http://lbowyer.surface.cx/<model>/views/<view>/<matter>branches

For browser editing (authorised):
http://lbowyer.surface.cx/<model>/<view>/<matter>

For CMS consumption
http://lbowyer.api.surface.cx/<model>/<matter>









# FINAL
Custom Domain Name                                          Account Domain Name

Account
http://account.leesbazaar.com                                http://lbowyer.vanilla.cx





Realms
http://leesbazaar.com/                          >           http://leesbazaar.realms.cx/
http://www.leesbazaar.com/                          >       http://leesbazaar.realms.cx/

Matter
http://matter.leesbazaar.com/                   >           http://leesbazaar.matter.cx/

Surface
http://surface.leesbazaar.com/                   >          http://leesbazaar.surface.cx/

Realms
http://realm.leesbazaar.com/                   >            http://leesbazaar.realms.cx/






http://api.leesbazaar.com/                          >       http://leesbazaar.api.vanilla-network.cx/
http://api.leesbazaar.com/matter                    >       http://leesbazaar.api.vanilla-network.cx/matter
http://api.leesbazaar.com/surface                   >       http://leesbazaar.api.vanilla-network.cx/surface
http://api.leesbazaar.com/realms                    >       http://leesbazaar.api.vanilla-network.cx/realms











http://substance.cx/project
    {
        meta: {
            id: "098798798798798789",
            created: 18279791792,
            author: "author-id",
        },
        properties: {
            title: {type: ShortText},
            subtitle: {type: ShortText},
            tags: [{type: ShortText}],
            age: {
                day: {type: Day},
                month: {type: Month},
                year: {type: Year},
                category: {type: ShortText, required: true},
            }
            description: {type: LongText},
            contact: {type: Substance(["contact:summary"])},
            illustration: {type: Picture, required: true} ,
            gallery: {type: Substance(["gallery"]), required: true} 
        },
        views: {
            _default: {
                properties: ALL,
                surface: "surface-id-0001"
            },
            summary: {
                properties: ["title", "subtitle", "age.category"],
                surface: "surface-id"
            },
            list: {
                properties: ["title", "illustration"],
                surface: "surface-id"
            }
        }
    }




http://surface.cx/project/
    {
        meta: {
            type: "user-defined";
            id: "surface-id-0001",
            created: 192987987979,
            author: "author-id"
        },
        html: "\<body>\<body>",
        theme: "style-id",
        js: null // Because it is user defined scripts are NOT allowed
    }

http://surface.cx/gallery/
    {
        meta: {
            type: "system-defined";
            id: "surface-id-0002",
            created: 192987987979,
            author: "author-id"
        },
        html: "\<body>\<body>",
        theme: "style-id",
        js: "script for controlling the gallery. Users can NOT change this code, so it is safe to use"
    }








http://matter.cx/paul-painting/
    {
        meta: {
            substance: "project",
            id: "matter-id-001",
            slug: "paul-painting",
            created: 198729739879387,
            author: "author-id"
        },
        data: {
            title: "Paul",
            subtitle: "Watercolour",
            tags: ["paint", "red", "watercolours", "music"],
            age: {
                year: "2023",
                category: "recent",
            }
            description: "Lorem imsum ......",
            contact: Matter(["matter-id-101:summary"]),
            illustration: {type: Picture, required: true} ,
            gallery: Matter(["matter-id-102"]) 
        }
    }

http://matter.cx/lee-contact/
    {
        meta: {
            substance: "contact",
            id: "matter-id-101",
            slug: "lee-contact",
            created: 198729739879387,
            author: "author-id"
        },
        data: {
            name: "Lee",
            email: "lee@lee.lee",
            bio: "Lorem imsum ......",
            avatar: {
                url: "image.png",
                alt: "Picture of my face"
            },
        }
    }

http://matter.cx/paul-gallery/
    {
        meta: {
            substance: "gallery",
            id: "matter-id-102",
            slug: "paul-gallery",
            created: 198729739879387,
            author: "author-id"
        },
        data: {
            name: "Paul Gallery",
            images: [{
                title: "Initial Sketch",
                description: "Lorms imsum ...",
                picture: {
                    url: "image.png",
                    alt: "Picture showing a sketch"
                }
            },{
                title: "Initial Sketch",
                description: "Lorms imsum ...",
                picture: {
                    url: "image.png",
                    alt: "Picture showing a sketch"
                }
            },{
                title: "Initial Sketch",
                description: "Lorms imsum ...",
                picture: {
                    url: "image.png",
                    alt: "Picture showing a sketch"
                }
            }]
        }
    }


matter:






Consuming Matter:

Browse / Edit existing substance in web browser:
http://substance.cx/project/     
http://substance.cx/project/summary
http://substance.cx/project/list


Create new substance via browser (if the resource is not found, instead of returning a 404, I propose to make new content with this slug as a starting point):
http://substance.cx/song/ 


API
Create new substance:
[POST] http://api.substance.cx/project/

Update substance:
[PATCH] http://api.substance.cx/project/

Delete substance:
[DELETE] http://api.substance.cx/project/

Consume substance as JSON 
JSON for default view of substance
[GET] http://api.substance.cx/project/

JSON for summary view of substance
[GET] http://api.substance.cx/project/summary



Consuming Matter:

Browse / Edit existing matter in web browser:
http://matter.cx/paul-painting/     
http://matter.cx/paul-painting/summary
http://matter.cx/paul-painting/list


Create new Matter via browser (if the resource is not found, instead of returning a 404, I propose to make new content with this slug as a starting point):
http://matter.cx/new-painting/ 


API
Create new content:
[POST] http://api.matter.cx/new-painting/

Update content:
[PATCH] http://api.matter.cx/paul-painting/

Delete content:
[DELETE] http://api.matter.cx/paul-painting/

Consume matter as JSON 
JSON for default view of Matter
[GET] http://api.matter.cx/paul-painting/

JSON for summary view of Matter
[GET] http://api.matter.cx/paul-painting/summary




Consume matter as surface (HTML) 
HTML for default view of Matter
[GET] http://api.surface.cx/paul-painting/

HTML for summary view of Matter
[GET] http://api.surface.cx/paul-painting/summary


Update surface:
[PATCH] http://api.surface.cx/paul-painting/

Delete surface:
[DELETE] http://api.surface.cx/paul-painting/






Browse / Edit existing Matter in web browser *:
JSON for default view of Matter
http://surface.cx/paul-painting/

JSON for summary view of Matter
http://surface.cx/paul-painting/summary

* If the requested surface does not exist, propose to create it.



http://realms.cx/leesbazaar/home-page                   http://leesbazaar.com/home-page
http://api.realms.cx/leesbazaar/home-page               http://api.realms.leesbazaar.com/home-page

http://substance.cx/leesbazaar/project/                http://substance.leesbazaar.com/project
http://api.substance.cx/leesbazaar/project/            http://api.substance.leesbazaar.com/project

http://surface.cx/leesbazaar/project/                  http://surface.leesbazaar.com/project
http://api.surface.cx/leesbazaar/project/              http://api.surface.leesbazaar.com/project

http://matter.cx/leesbazaar/paul/                      http://matter.leesbazaar.com/paul
http://api.matter.cx/leesbazaar/paul/                  http://api.matter.leesbazaar.com/paul



OR


http://leesbazaar.realms.cx/home-page                  http://leesbazaar.com/home-page
http://api.leesbazaar.realms.cx/home-page              http://api.realms.leesbazaar.com/home-page

http://leesbazaar.substance.cx/project/                http://substance.leesbazaar.com/project
http://api.leesbazaar.substance.cx/project/            http://api.substance.leesbazaar.com/project

http://leesbazaar.surface.cx/project/                  http://surface.leesbazaar.com/project
http://api.leesbazaar.surface.cx/project/              http://api.surface.leesbazaar.com/project

http://leesbazaar.matter.cx/paul/                      http://matter.leesbazaar.com/paul
http://leesbazaar.api.matter.cx/paul/                  http://api.matter.leesbazaar.com/paul















http://api.leesbazaar.com/
http://api.leesbazaar.com/surface/          http://api.leesbazaar.surface.cx/
http://api.leesbazaar.com/matter/           http://api.leesbazaar.matter.cx/
http://api.leesbazaar.com/realms/           http://api.leesbazaar.realms.cx/



http://api.leesbazaar.com/                  http://api.leesbazaar.vanilla.cx
http://api.leesbazaar.com/surface/        
http://api.leesbazaar.surface.cx/

http://api.leesbazaar.com/matter/     
http://api.leesbazaar.matter.cx/

http://api.leesbazaar.com/realms/     
http://api.leesbazaar.realms.cx/



The DNS for the following domains all point to my main node server (55.XX.XX.XX).
matter.cx
surface.cx
substance.cx
realms.cx
vanilla.cx

when a new user creates an account I create the following sub domains for them:
leesbazaar.vanilla.cx
leesbazaar.matter.cx
leesbazaar.surface.cx
leesbazaar.substance.cx
leesbazaar.realms.cx

api.leesbazaar.vanilla.cx
api.leesbazaar.matter.cx
api.leesbazaar.surface.cx
api.leesbazaar.substance.cx
api.leesbazaar.realms.cx

Then if they attach a custom domain they point it as such:


# Server Setup


My server = 55.11.11.11

vanilla.cx      > 55.11.11.11
matter.cx       > 55.11.11.11
substance.cx    > 55.11.11.11
surface.cx      > 55.11.11.11
realms.cx       > 55.11.11.11




// API Access
api.leesbazaar.com              > api.leesbazaar.vanilla.cx
api.leesbazaar.com/matter       > api.leesbazaar.vanilla.cx/matter
api.leesbazaar.com/substance    > api.leesbazaar.vanilla.cx/substance
api.leesbazaar.com/surface      > api.leesbazaar.vanilla.cx/surface
api.leesbazaar.com/realms       > api.leesbazaar.vanilla.cx/realms

// For front end browsing / management
matter.leesbazaar.com           > leesbazaar.matter.cx
substance.leesbazaar.com        > leesbazaar.substance.cx
surface.leesbazaar.com          > leesbazaar.surface.cx
realms.leesbazaar.com           > leesbazaar.realms.cx

// Website
leesbazaar.com                  > leesbazaar.realms.cx


# Apps

vanilla = vanilla.cx
matter = matter.cx
surface = surface.cx
realms = realms.cx

subdomain length == 1 && subdomain[0] == "api"
switch req.headers.host
    case vanilla.cx: 
        api.vanilla.cx
    case matter.cx:
        api.matter.cx
    case surface.cx:
        api.surface.cx
    case substance.cx:
        api.substance.cx
    case realms.cx:
        api.realms.cx
    default:
        // Must be a user account, check it is valid
        checkifvaliduser(req.headers.host)
        api.leesbazaar.com



sub domain length == 1 && subdomain == "api"
check subdomain[1] == valid user

matter.leesbazaar.com












leesbazaar.com                  > leesbazaar.vanilla.cx
matter.leesbazaar.com           > leesbazaar.matter.cx
surface.leesbazaar.com          > leesbazaar.surface.cx
substance.leesbazaar.com        > leesbazaar.substance.cx
realms.leesbazaar.com           > leesbazaar.realms.cx

api.leesbazaar.com              > api.leesbazaar.vanilla.cx
api.leesbazaar.vanilla.cx       > api.leesbazaar.vanilla.cx

api.leesbazaar.com/matter       > api.leesbazaar.vanilla.cx 
api.leesbazaar.matter.cx        > api.leesbazaar.vanilla.cx

api.leesbazaar.com/surface      > api.leesbazaar.vanilla.cx
api.leesbazaar.surface.cx       > api.leesbazaar.vanilla.cx

api.leesbazaar.com/substance    > api.leesbazaar.vanilla.cx
api.leesbazaar.substance.cx     > api.leesbazaar.vanilla.cx

api.leesbazaar.com/realms       > api.leesbazaar.vanilla.cx
api.leesbazaar.realms.cx        > api.leesbazaar.vanilla.cx




